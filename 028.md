Drynooo

high

# nToken may be issued additionally

## Summary

不正确的参数传递导致铸币逻辑被破坏，可能导致nToken的增发。

Incorrect parameter passing leads to the destruction of mint logic, which may lead to additional issuance of nToken.

## Vulnerability Detail

在nTokenMintAuction.sol合约中，_nTokenMint函数的功能是mintnToken，mint的数量应该由calculateTokensToMint函数根据primeCashToDeposit算出。但是在代码实现中，mint的数量直接传入primeCashToDeposit。攻击只需要保证tokensToMint>=0即可实现nToken增发。

In the nTokenMintAuction.sol contract, the function of the _nTokenMint function is mintnToken, and the amount of mint should be calculated by the calculateTokensToMint function based on primeCashToDeposit. But in the code implementation, the amount of mint is directly passed to primeCashToDeposit. The attack only needs to ensure that tokensToMint>=0 to achieve nToken issuance.

https://github.com/sherlock-audit/2023-03-notional/blob/main/contracts-v2/contracts/external/actions/nTokenMintAction.sol#L88-L106


## Impact

nToken增发

nToken issuance

## Code Snippet

![image](https://user-images.githubusercontent.com/49943935/231813081-7283774b-ca84-4ce2-ac4c-b92435e275c2.png)


## Tool used

Manual Review

## Recommendation

将增发数量从primeCashToDeposit改为tokensToMint。

Change the issuance amount from primeCashToDeposit to tokensToMint.
